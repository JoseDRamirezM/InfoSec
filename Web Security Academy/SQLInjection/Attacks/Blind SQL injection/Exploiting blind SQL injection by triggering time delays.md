# Exploiting blind SQL injection by triggering time delays
#BLINDSQLI 

From previous scenarios [[Blind SQL injection with conditional errors]] and [[Blind SQL injection with conditional responses]] now suppose the database errors are handled gracefully. Now there's no difference in the application response whether a database error is triggered or not. So inducing conditional errors will no longer work.

In this situation, try to test for triggering time delays conditionally, depending on ans injected condition. Generally SQL queries are processed synchronously by the application, thus delaying the execution of an SQL query will also delay the HTTP response.

The techniques for triggering a time delay are highly specific to the type of database being used. On `Microsoft SQL Server` the following input can be used to test a condition and trigger a time delay based on the truth of said condition.

Check [SQL injection cheat sheet](https://portswigger.net/web-security/sql-injection/cheat-sheet)

#SQLiPAYLOAD 
```SQL
'; IF (1=2) WAITFOR DELAY '0:0:10'-- 
'; IF (1=1) WAITFOR DELAY '0:0:10'--
```

The first statement will not trigger the time delay because `1=2` is `false`. The second will trigger the time delay as `1=1` is `true`.

Using this technique, data retrieval is possible testing character by character

```SQL
'; IF (SELECT COUNT(Username) FROM Users WHERE Username = 'Administrator' AND SUBSTRING(Password, 1, 1) > 'm') = 1 WAITFOR DELAY '0:0:{delay}'--
```

## Exploitation example

[[Blind SQL injection with time delays]]

[[Blind SQL injection with time delays and information retrieval]]